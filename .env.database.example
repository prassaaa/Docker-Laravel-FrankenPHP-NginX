# Database Configuration Example for Optimized Setup

# Default database connection
DB_CONNECTION=pgsql

# PostgreSQL Configuration (via PgBouncer)
DB_HOST=pgbouncer
DB_PORT=6432
DB_DATABASE=laravel_db
DB_USERNAME=laravel
DB_PASSWORD=your_secure_password

# Direct PostgreSQL connection (for migrations)
DB_HOST_DIRECT=postgres
DB_PORT_DIRECT=5432
DB_MIGRATION_CONNECTION=pgsql_direct

# MySQL Configuration (via ProxySQL)
# DB_CONNECTION=mysql
# DB_HOST=proxysql
# DB_PORT=6033
# DB_DATABASE=laravel
# DB_USERNAME=laravel
# DB_PASSWORD=your_secure_password

# Direct MySQL connection (for migrations)
# DB_HOST_DIRECT=mysql
# DB_PORT_DIRECT=3306
# DB_MIGRATION_CONNECTION=mysql_direct

# Connection pooling settings
DB_PERSISTENT=false
DB_STICKY=true

# Retry configuration
DB_RETRY_TIMES=3
DB_RETRY_SLEEP=1

# Query logging
DB_LOG_QUERIES=false
DB_LOG_SLOW_QUERIES=true
DB_SLOW_QUERY_TIME=2

# Redis Configuration
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_CLIENT=phpredis

# Redis databases
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_SESSION_DB=2
REDIS_QUEUE_DB=3

# PgBouncer specific settings (for pgbouncer.ini)
PGBOUNCER_POOL_MODE=transaction
PGBOUNCER_DEFAULT_POOL_SIZE=25
PGBOUNCER_MAX_CLIENT_CONN=100
PGBOUNCER_MAX_DB_CONNECTIONS=50

# ProxySQL specific settings
PROXYSQL_MAX_CONNECTIONS=1000
PROXYSQL_DEFAULT_HOSTGROUP=0
PROXYSQL_MONITOR_USERNAME=monitor
PROXYSQL_MONITOR_PASSWORD=monitor_password